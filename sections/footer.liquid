{{ 'style.footer.css' | asset_url | stylesheet_tag }}

<footer>
    <div class="container">
        <div class="footer__inner">
            {% form 'customer', class: "footer__form" %}
                <h3 class="footer__link__title">{{ section.settings.footer_link_title_news }}</h3>
                {{ form.errors | default_errors }}
                <div class="footer__input__wrapper">
                    <input 
                      type="email" 
                      class="footer__input" 
                      name="contact[email]"
                      id="email" 
                      placeholder="Enter your email" 
                      value="{{ form.email }}" 
                      aria-required="true">

                    <div class="field field--double">

                      <label class="ctm_checkbox">
                        <input type="checkbox" name="contact[tags]" class="check_box check_box--news" data-target="womens_jewelry">
                        <!-- <input type="hidden" name="contact[tags]" value=""> -->
                        <span>women</span>
                      </label>
                      <label class="ctm_checkbox">
                        <input type="checkbox" name="contact[tags]" class="check_box check_box--news" data-target="mens_jewelry">
                        <input type="hidden" name="contact[tags]" value="" class="check_box--last">
                        <!-- <input type="hidden" name="customer[tags]" value="VIP" class="check_box"> -->
                        <span>man</span>
                      </label>

                    </div>
                    <button type="submit" class="footer__btn">{% render "icon-right-arrow" %}</button>
                </div>
                <div class="footer__social">
                  {% for item in section.blocks %}
                    {% if item.type == "socials" %}
                      <a href="{{item.settings.link1}}"><img src="{{item.settings.link1_src | image_url: width: 16}}" alt="social-icon"></a>
                      <a href="{{item.settings.link2}}"><img src="{{item.settings.link2_src | image_url: width: 16}}" alt="social-icon"></a>
                      <a href="{{item.settings.link3}}"><img src="{{item.settings.link3_src | image_url: width: 16}}" alt="social-icon"></a>
                    {% endif %}
                  {% endfor %}
                </div>
            {% endform %}
            <div class="footer__row">
              {% for item in section.blocks %}
                {% if item.type == "l_list" %}
                  <ul class="footer__links">
                      <h3 class="footer__link__title">{{ item.settings.l_list.title }}</h3>
                      {% for link in item.settings.l_list.links %}
                      <li><a href="{{ link.url }}" class="footer__link">{{ link.title }}</a></li>
                      {% endfor %}
                  </ul>
                {% endif %}
              {% endfor %}
            </div>

        </div>
        <p class="copyright">{{ section.settings.copyright }}</p>
        <img class="AF_logo" src="{%- if section.settings.icon_AF != blank -%}{{ section.settings.icon_AF | image_url}}{%- endif -%}" />
    </div>
</footer>
<script>
  document.querySelector(".footer__form").addEventListener("change", e=>{
    if(e.target.classList.contains("check_box--news")){
      if (document.querySelectorAll(".check_box--news:checked").length>=2) {
        console.log("both selected")
        document.querySelector(".check_box--last").value = "womens_jewelry, mens_jewelry"
      }else{
        if (e.target.checked) {
          document.querySelector(".check_box--last").value = e.target.getAttribute("data-target")
          console.log(document.querySelector(".check_box--last"), document.querySelector(".check_box--last").value, "yes data")
          // e.target.nextElementSibling.value = e.target.getAttribute("data-target")
          // e.target.insertAdjacentHTML("afterend", `<input type="hidden" name="contact[tags]" value="${e.target.getAttribute("data-target")}">`)
        }else{
          // e.target.nextElementSibling.value = ""
          document.querySelector(".check_box--last").value = ""
          console.log(document.querySelector(".check_box--last"), document.querySelector(".check_box--last").value, "no data")
        }
      }
    }
    // if(e.target.getAttribute("data-target") === "womens_jewelry"){
    //   if(e.target.checked){
    //   }
    // }else if(e.target.classList.contains("m")){
    //   console.log("m")
    // }

  })
</script>
{% schema %}
{
  "name": "Footer settings",
  "settings": [
    {
        "type": "text",
        "id": "footer_link_title_news",
        "label": "Footer 1st link title change",
        "default": "Newsletter"
    },
    {
      "type": "text",
      "id": "copyright",
      "label": "Footer copyright change",
      "default": "Â©2020 Again Faster. All Rights Reserved"
    },
    {
      "type": "image_picker",
      "id": "icon_AF",
      "label": "AF logo img"
    }
  ],
  "blocks": [
    {
      "name": "Social media links",
      "type": "socials",
      "limit": 1,
      "settings": [
        {
          "type": "image_picker",
          "id": "link1_src",
          "label": "Link 1 icon" 
        },
        {
          "type": "url",
          "id": "link1",
          "label": "Link 1" 
        },
        {
          "type": "image_picker",
          "id": "link2_src",
          "label": "Link 2 icon" 
        },
        {
          "type": "url",
          "id": "link2",
          "label": "Link 2" 
        },
        {
          "type": "image_picker",
          "id": "link3_src",
          "label": "Link 3 icon"
        },
        {
          "type": "url",
          "id": "link3",
          "label": "Link 3"
        }
      ]
    },
    {
      "name": "Link list",
      "type": "l_list",
      "settings": [
        {
          "type": "link_list",
          "id": "l_list",
          "label": "Link list"
        }
      ]
    }   
  ],
  "presets": [
    {
      "name": "Footer",
      "settings": {
      },
      "blocks": [
        {
           "type": "socials"
        },
        {
            "type": "l_list"
        },
        {
            "type": "l_list"
        }
      ]
    }
  ]
}
{% endschema %}